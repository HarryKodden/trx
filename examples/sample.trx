INCLUDE user.inc;

CONSTANT PI 3.14159;
CONSTANT APP_NAME "TRX Interpreter";

TYPE ADDRESS {
    STREET CHAR(64);
    ZIP INTEGER;
}

TYPE PERSON {
    ID INTEGER;
    NAME CHAR(64);
    AGE INTEGER;
    ACTIVE BOOLEAN;
    SALARY DECIMAL(10,2);
}

TYPE EMPLOYEE {
    DEPARTMENT CHAR(32);
}

FUNCTION inner() {
    trace('Hello world');
}

FUNCTION process_employee(PERSON) : PERSON {
    output := input;

    IF input.ACTIVE THEN {
        output.SALARY := input.SALARY * 1.1;
    } ELSE {
        output.SALARY := 0;
    }

    inner();

    WHILE output.SALARY < 50000 {
        output.SALARY := output.SALARY + 1000;
    }

    IF input.ACTIVE THEN {
        output.SALARY := output.SALARY * 1.15;
    }
}

FUNCTION calculate_bonus(PERSON) : PERSON {
    output.SALARY := input.SALARY * 1.1;
}
